# To get this app working:
# pip3 install .
# python3 -m venv venv
# source venv/bin/activate
# flask run --reload

from flask import Flask, request
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

import json
import requests


@app.route('/debug', methods = ['POST', 'GET'])
def debug():
    info = ""
    info += "Url params " + str(request.args) + "<br>"

    info += "JSON: " + str(request.get_json(force=True)) + "<br>"
    info += "Data: " + str(request.get_data) + "<br>"

    return info

@app.route('/relay', methods = ['POST', 'GET'])
def relay():
    data = request.get_json(force=True)
    url = data["url"]
    headers = data["headers"]

    data = requests.get(url=url, headers=headers)

    return data.json()

@app.route('/')
@app.route('/index')
def index():
    return "nothing here"